# 계절 시스템 가이드

이 문서는 Continent 플러그인에서 제공하는 계절 시스템의 동작 방식과 설정 방법을 상세히 설명합니다.

## 기본 개요

Continent 플러그인은 네 개의 계절을 순환합니다.

- **SPRING (봄)**
- **SUMMER (여름)**
- **AUTUMN (가을)**
- **WINTER (겨울)**

각 계절은 설정된 일수만큼 지속되고, 일수 소모가 끝나면 다음 계절로 넘어갑니다.

현재 계절과 남은 일수는 `season.yml` 파일에 저장되어 서버 재시작 후에도 이어집니다.

## 계절 변화 효과

계절이 바뀔 때 게임 월드에는 다음과 같은 변화가 적용됩니다.

- **봄**
  - 겨울 동안 쌓인 낙엽 더미가 잎 블록으로 변합니다.
  - 잎 입자가 `HAPPY_VILLAGER` 형태로 소량 재생됩니다.
- **여름**
  - 나무 잎이 고정되어 더 이상 사라지지 않도록 설정됩니다.
  - `END_ROD` 입자와 물소리 효과가 재생됩니다.
- **가을**
  - 나무 아래에 낙엽 더미(`LEAF_LITTER`)가 생성됩니다.
  - `BLOCK` 입자(오크 잎)가 발생하고 잔디 밟는 소리가 들립니다.
- **겨울**
  - 모든 낙엽 더미가 제거됩니다.
  - `SNOWFLAKE` 입자와 눈 밟는 소리가 재생됩니다.

## 설정 방법

`config.yml`의 `season` 섹션에서 지속 일수와 입자 개수를 조정할 수 있습니다.

```yaml
season:
  durations:
    spring: 500
    summer: 700
    autumn: 400
    winter: 400
  particles:
    spring: 20
    summer: 15
    autumn: 25
    winter: 15
```

각 값은 서버 일수(마인크래프트 틱 기준)와 입자 수를 의미합니다. 설정을 변경한 후에는 `/season reload` 명령으로 적용합니다.

## 관련 파일

- `season.yml` – 현재 계절과 남은 일수를 저장합니다.
- `leaves.yml` – 가을에 생성된 낙엽 위치 정보를 저장합니다.

이 두 파일은 플러그인의 데이터 폴더에 위치하며 서버가 종료될 때 자동으로 갱신됩니다.

## 명령어 요약

플레이어는 다음 명령어로 계절 시스템을 제어할 수 있습니다.

- `/season info` – 현재 계절, 남은 일수, 처리된 청크 수를 확인합니다.
- `/season set <season>` – 지정한 계절로 즉시 전환합니다.
- `/season skip` – 다음 계절로 이동합니다.
- `/season reload` – 설정 파일을 다시 불러옵니다.

## 온도와의 연계

플러그인의 `TemperatureManager`는 현재 계절과 시간에 따라 월드 온도를 계산합니다. `BodyTemperatureManager`는 이 값을 바탕으로 플레이어 체온을 변화시키고, 상태 이상(`StatusEffectManager`)을 적용합니다. 따라서 계절 변화는 게임 내 체온 시스템에도 직접적인 영향을 줍니다.

## 계절 및 기온 기반 버프/디버프

### ☀️ 여름 디버프 (기온 상승)

- 기온 ≥ 35도:
  - **기절** (이동 불가, 타이틀로 '기절' 표시)
- 기온 ≥ 33도:
  - **Blindness**
  - **Nausea**
  - **Slowness II**
- 기온 ≥ 31도:
  - **Nausea**
  - **Slowness I**
- 기온 ≥ 28도:
  - **Slowness I**

- 보정 조건:
  - **ShelterLevel = INDOOR**: 기온 -5℃
  - **ShelterLevel = SEMI_OUTDOOR**: 기온 -2℃
  - **장마철(우기)**: 기온 -3℃

### ❄️ 겨울 디버프 (기온 저하)

- 기온 ≤ -5도:
  - **기절** (체온 ≤ 30도일 경우)
- 기온 ≤ -3도:
  - **Blindness**
  - **Slowness II**
  - **Mining Fatigue**
- 기온 ≤ 0도:
  - **Slowness I**
  - **Mining Fatigue**
- 기온 ≤ 2도:
  - **Slowness I**

- 추가 하강 조건:
  - **물 속 / 가루눈**: 체온 추가 하락
  - **ShelterLevel = INDOOR**: 기온 -5℃

### 🌸 봄 버프

- 작물 성장 속도 +20%
- 기온 디버프 저항 단계 +1
- 체온 회복 속도 +1.0

### 🍂 가을 버프 및 디버프 완화

- 작물 성장 속도: 정상 상태로 복귀
- 기온 ≤ 25도: 디버프 없음
- 철 갑옷 착용 시 더위 디버프 완화
- 열사병 위험 점진적 감소

### ✅ 적용 시스템

- 기온 및 체온은 5초 주기로 계산
- ShelterLevel (실내/실외/반실외)에 따라 보정 적용
- 디버프는 StatusEffectManager를 통해 일괄 제어
- 기절 시 이동 불가, 타이틀로 상태 전달

---

이상으로 Continent 플러그인의 계절 시스템 전반을 설명했습니다. 설정 파일을 조정하여 원하는 주기로 계절을 운용하고, 명령어로 세부 제어를 할 수 있습니다.
